<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/login" (click)="goBack()"></ion-back-button>
    </ion-buttons>
    <ion-title>Recuperar Contraseña</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding ion-text-center">
  <div class="ion-padding-vertical">
    <h1 class="ion-text-center">¿Olvidaste tu contraseña?</h1>
    <p>Introduce tu correo electrónico para recibir un enlace de restablecimiento.</p>
  </div>

  <ion-list lines="none" class="ion-margin-vertical">
    <ion-item>
      <ion-input 
        label="Correo Electrónico" 
        labelPlacement="floating" 
        type="email" 
        [(ngModel)]="email" 
        placeholder="tu@ejemplo.com"
        required
      ></ion-input>
    </ion-item>
  </ion-list>

  <ion-button 
    expand="block" 
    class="ion-margin-top" 
    (click)="resetPassword()" 
    [disabled]="isLoading || !email"
    color="tertiary"
  >
    <ion-spinner *ngIf="isLoading" name="crescent"></ion-spinner>
    <span *ngIf="!isLoading">Enviar Enlace</span>
  </ion-button>

  <div *ngIf="message" class="ion-margin-top ion-padding message-box" [class.error-message]="isError" [class.success-message]="!isError">
    <p>{{ message }}</p>
  </div>

  <ion-text class="ion-margin-top">
    <p><a routerLink="/login">Volver al inicio de sesión</a></p>
  </ion-text>

</ion-content>

<style>
  .message-box {
    border-radius: 8px;
    padding: 15px;
    margin-top: 20px;
    font-size: 0.95em;
  }

  .success-message {
    background-color: var(--ion-color-success-tint);
    color: var(--ion-color-success-shade);
    border: 1px solid var(--ion-color-success);
  }

  .error-message {
    background-color: var(--ion-color-danger-tint);
    color: var(--ion-color-danger-shade);
    border: 1px solid var(--ion-color-danger);
  }

  ion-button[color="tertiary"] {
    --background: var(--ion-color-tertiary);
    --background-activated: var(--ion-color-tertiary-shade);
    --background-focused: var(--ion-color-tertiary-tint);
    --color: #fff;
    --border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  }
</style>
